<div class="span10 offset1">
	<div class="alert" id="Msj"></div>
	<a href="#ModalInsertar" role="button" data-toggle="modal" class="btn btn-success pull-right"><i class="icon-plus"></i> Agregar Joven</a>
	<table class="table table-striped">
		<thead>
			<tr>
				<th>ID</th>
				<th>Credencial</th>
				<th>Nombre</th>
				<th>Equipo</th>
				<th colspan="3" class="text-center">Opciones</th>
			</tr>
		</thead>
		<tbody>
			<?php for($i=1;$i<=20;$i++):	?>
			<tr>
				<td><?php echo $i; ?></td>
				<td>123456789</td>
				<td>Jaro Andrei Marval Pereira</td>
				<td></td>
				<td class="text-center">
					<?php if (True): ?>
						<a href="#" class="btn btn-warning"><i class="icon-frown"></i> Inactivar</a>
					<?php else: ?>
						<a href="#" class="btn btn-success"><i class="icon-smile"></i> Activar</td></a>
					<?php endif; ?>
				<td class="text-center"> <a href="#" class="btn btn-primary"><i class="icon-edit"></i> Editar</a> </td>
				<td class="text-center"> <a href="#" class="btn btn-danger"><i class="icon-trash"></i> Borrar</a> </td>
			</tr>
			<?php endfor; ?>
		</tbody>
	</table>
</div>
<!-- Modal -->
<div id="ModalInsertar" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
		<h3 id="myModalLabel">Registrar Jóven</h3>
	</div>
	<div class="modal-body">
			<label class="span2">Cédula:</label> <?php echo Registro::cmbNac('nac', 'class="span1"'); ?> <?php echo Registro::number('cedula', 'class="span2"'); ?>
			<label class="span2">Credencial:</label> <?php echo Registro::number('credencial', 'class="span2"'); ?>
			<label class="span2">Primer Nombre:</label> <?php echo Form::text('primer_nombre', 'class="span2"'); ?>
			<label class="span2">Segundo Nombre:</label> <?php echo Form::text('segundo_nombre', 'class="span2"'); ?>
			<label class="span2">Primer Apellido:</label> <?php echo Form::text('primer_apellido', 'class="span2"'); ?>
			<label class="span2">Segundo Apellido:</label> <?php echo Form::text('segundo_apellido', 'class="span2"'); ?>
			<label class="span2">Rama:</label> <?php echo Form::dbSelect('ramas_id', 'nombre', array('ramas', 'getRamas', '1'), '-- Seleccione --', 'class="span2"'); ?>
	</div>
	<div class="modal-footer">
		<i class="icon-spinner icon-spin icon-2x" id="espere"></i>
		<button class="btn" data-dismiss="modal" aria-hidden="true">Cancelar</button>
		<button class="btn btn-primary" id="btnRegistrar">Registrar</button>
	</div>
</div>
<?php echo Tag::js('form'); ?>
<script type="text/javascript">
	$('.alert').fadeOut();

	function spinnerRegistro() {
		($('#espere').css('display')=='none')? $('#espere').css('display', 'inline-block') : $('#espere').css('display', 'none') ;
	}

	$('#btnRegistrar').on('click', function(evento) {
		evento.preventDefault();
		spinnerRegistro();

		$.post(
			'<?php echo PUBLIC_PATH; ?>jovenes/registrar/',
			{
				type: 'json',
				"registro[nac]": $('#nac').val(),
				"registro[cedula]": $('#cedula').val(),
				"registro[credencial]": $('#credencial').val(),
				"registro[primer_nombre]": $('#primer_nombre').val(),
				"registro[segundo_nombre]": $('#segundo_nombre').val(),
				"registro[primer_apellido]": $('#primer_apellido').val(),
				"registro[segundo_apellido]": $('#segundo_apellido').val(),
				"registro[ramas_id]": $('#ramas_id').val(),
				registrar: 'registrando'
			},
			function(data) {
				if (data.status == "OK") {
					sucessMsj('Jovén registrado con éxito');
					$('#ModalInsertar').modal('hide');
					spinnerRegistro();
				} else {
					errorMsj(data.message);
					$('#ModalInsertar').modal('hide');
					spinnerRegistro();
				}
			},
			'json'
		);
	});
</script>